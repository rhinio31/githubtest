# --- Show AWS_DEFAULT_PROFILE in Git Bash prompt (safe version) ---

# Function that echoes the AWS profile if defined
__aws_ps1() {
  [ -n "$AWS_DEFAULT_PROFILE" ] && printf " (AWS:%s)" "$AWS_DEFAULT_PROFILE"
}

# Tell Git's helper to include our extra text in the default prompt
# PS1 is rebuilt every time, so we only need to define PS1 once here.
# The builtin __git_ps1 (loaded by /etc/profile.d/git-prompt.sh) is what
# provides the branch info and colors.
if type __git_ps1 >/dev/null 2>&1; then
  PS1='`__git_ps1 "\[\033[1;32m\]\u@\h\[\033[0m\]:\[\033[1;34m\]\W\[\033[0m\]" "$(__aws_ps1) \$ "`'
else
  # Fallback if git prompt isnâ€™t loaded yet
  PS1='\u@\h:\W$(__aws_ps1)\$ '
fi
